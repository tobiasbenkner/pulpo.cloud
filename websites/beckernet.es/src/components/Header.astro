---
import Container from "@/components/ui/Container.astro";
import LanguageSwitcher from "@/components/LanguageSwitcher.astro";
import { getNavbarItems } from "@/lib/navbar";
import { getTranslatedPath } from "@/lib/registry";
import type { Language } from "@/lib/i18n";

interface Props {
  lang: Language;
  routeKey: string;
}
const { lang, routeKey } = Astro.props;

const navItems = await getNavbarItems(lang, Astro.url.pathname);
const homeHref = getTranslatedPath("home", lang);
---

<header
  class="sticky top-0 z-50 w-full border-b border-border/50 bg-surface/80 backdrop-blur-md"
>
  <Container>
    <div class="flex h-20 items-center justify-between">
      <a href={homeHref} class="text-xl font-bold font-serif text-primary">
        Becker
      </a>

      <nav class="hidden md:flex items-center gap-6 text-sm font-medium">
        {
          navItems.map((item) => {
            return (
              <a
                href={item.href}
                class:list={[
                  "transition-colors duration-200",
                  item.isActive
                    ? "text-secondary font-bold"
                    : "text-text-muted hover:text-primary",
                ]}
              >
                {item.label}
              </a>
            );
          })
        }
      </nav>

      <div class="flex items-center gap-4">
        <LanguageSwitcher lang={lang} routeKey={routeKey} />
      </div>
    </div>
  </Container>
</header>
