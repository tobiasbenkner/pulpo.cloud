---
import type { HomeTranslations } from "./home.i18n";
import type { Language } from "../../lib/i18n";
import { getTranslatedPath } from "../../lib/registry";
import SectionHeader from "../../components/ui/SectionHeader.astro";
import Hero from "../../components/blocks/blocks/Hero.astro";
import Awards from "../../components/blocks/blocks/Awards.astro";

import general from "../../assets/awards/general.webp";
import g16_ta from "../../assets/awards/16-ta.webp";
import g17_ta from "../../assets/awards/17-ta.webp";
import g18_ta from "../../assets/awards/18-ta.webp";
import g19_ta from "../../assets/awards/19-ta.webp";
import g20_guru from "../../assets/awards/20-guru.webp";
import g20_tc from "../../assets/awards/20-tc.webp";
import g21_ta from "../../assets/awards/21-ta.webp";
import g21_tc from "../../assets/awards/21-tc.webp";
import g22_guru from "../../assets/awards/22-guru.webp";
import g22_tc from "../../assets/awards/22-tc.webp";
import g23_tc from "../../assets/awards/23-tc.webp";
import g24_ta from "../../assets/awards/24-ta.webp";
import g25_guru from "../../assets/awards/25-guru.webp";
import g25_ta from "../../assets/awards/25-ta.webp";

interface Props {
  lang: Language;
  t: HomeTranslations;
}

const { lang, t } = Astro.props;

const video = "/hero.mp4";
const logo = "/chiquita.webp";

const sittings = t.schedule.sittings;
---

<Hero
  title={t.hero.title}
  subtitle={t.hero.subtitle}
  logo={logo}
  video={video}
  links={[
    {
      href: getTranslatedPath("menu", lang),
      label: t.hero.cta,
    },
  ]}
/>

<Awards
  title={t.awards.title}
  subtitle={t.awards.subtitle}
  text={t.awards.quote}
  author={t.awards.author}
  awards={[
    {
      src: general,
      alt: "Mejor Premio",
    },
    {
      src: g16_ta,
      alt: "Trip Advisor 2016",
    },
    {
      src: g17_ta,
      alt: "Trip Advisor 2017",
    },
    {
      src: g18_ta,
      alt: "Trip Advisor 2018",
    },
    {
      src: g19_ta,
      alt: "Trip Advisor 2019",
    },
    {
      src: g20_guru,
      alt: "Restaurant Guru 2020",
    },
    {
      src: g20_tc,
      alt: "Travelers Choice 20",
    },
    {
      src: g21_ta,
      alt: "Trip Advisor 2021",
    },
    {
      src: g21_tc,
      alt: "Travelers Choice 2021",
    },
    {
      src: g22_guru,
      alt: "Restaurant Guru 2022",
    },
    {
      src: g22_tc,
      alt: "Travelers Choice 2022",
    },
    {
      src: g23_tc,
      alt: "Travelers Choice 2023",
    },
    {
      src: g24_ta,
      alt: "Trip Advisor 2024",
    },
    {
      src: g25_guru,
      alt: "Restaurant Guru 2025",
    },
    {
      src: g25_ta,
      alt: "Trip Advisor 2025",
    },
  ]}
/>

<!-- ABOUT SECTION -->
<section class="bg-background py-24 px-6 relative overflow-hidden">
  <div class="max-w-7xl mx-auto">
    <div class="mb-16 text-center">
      <SectionHeader title={t.about.title} align="center" />
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-24 items-start">
      <div class="relative w-full max-w-md mx-auto aspect-3/4">
        <div
          class="absolute inset-4 border border-amber-200/20 z-20 pointer-events-none"
        >
        </div>
        <div
          class="absolute inset-0 border border-amber-200/10 z-20 pointer-events-none translate-x-3 translate-y-3"
        >
        </div>
        <div class="w-full h-full overflow-hidden relative">
          <img
            src="/team.webp"
            alt="Team El Búho Tuerto"
            class="w-full h-full object-cover opacity-90"
          />
          <div
            class="absolute inset-0 bg-[radial-gradient(circle,transparent_40%,rgba(10,10,10,0.8)_100%)] z-10"
          >
          </div>
        </div>
      </div>

      <div class="relative">
        <div
          class="prose-book text-gray-300 font-serif italic text-lg leading-relaxed text-justify relative z-10"
        >
          <p set:html={t.about.content} />
        </div>

        <div
          class="mt-12 flex flex-col items-center gap-4 border-t border-white/10 pt-8"
        >
          <div class="text-amber-200/40 text-2xl">❦</div>
          <p
            class="text-white uppercase tracking-[0.3em] text-xs font-bold text-center"
          >
            {t.about.footer}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- SCHEDULE SECTION -->
<section class="bg-background py-24 px-6 relative overflow-hidden text-white">
  <div class="max-w-6xl mx-auto">
    <SectionHeader title={t.schedule.title} subtitle={t.schedule.subtitle} />

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      {
        sittings.map((item: any) => (
          <div
            class={`relative flex flex-col p-8 md:p-10 rounded-2xl border ${item.type === "closed" ? "border-white/5 bg-white/1" : "border-white/10 bg-white/3"}`}
          >
            <div class="mb-10">
              <h3 class="text-amber-200 text-lg md:text-xl tracking-widest uppercase font-medium">
                {item.days}
              </h3>
            </div>

            <div class="flex-1 space-y-12">
              {item.type === "closed" ? (
                <div class="py-10">
                  <span class="text-white/30 uppercase tracking-widest text-sm block mb-2">
                    {item.label}
                  </span>
                  <p class="text-gray-400 font-serif italic text-xl">
                    {item.message}
                  </p>
                </div>
              ) : (
                (item.sessions || [item]).map((session: any) => (
                  <div class="space-y-6">
                    <div class="flex justify-between items-end border-b border-white/10 pb-3">
                      <span class="text-white text-lg tracking-widest uppercase font-light">
                        {session.label || "Horario"}
                      </span>
                      <span class="text-sm text-amber-200/40 tracking-wider font-medium">
                        {session.range}
                      </span>
                    </div>

                    <div class="space-y-5">
                      {(session.turnos ?? []).map((turno: any) => (
                        <div class="flex justify-between items-center group">
                          <div class="flex items-center gap-3">
                            <div class="w-1.5 h-1.5 rounded-full bg-amber-200/40 group-hover:bg-amber-200 transition-colors" />
                            <span class="text-gray-400 text-sm uppercase tracking-widest group-hover:text-white transition-colors">
                              {turno.label}
                            </span>
                          </div>
                          <span class="text-white font-serif italic text-lg md:text-lg tracking-wide group-hover:text-amber-200 transition-colors">
                            {turno.time}
                          </span>
                        </div>
                      ))}
                    </div>
                  </div>
                ))
              )}
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<style>
  .animate-fade-in {
    animation: fadeIn 1.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .prose-book {
    position: relative;
  }
  .prose-book :global(.first-phrase) {
    font-variant: small-caps;
    letter-spacing: 0.1em;
    font-style: normal;
    color: white;
    font-weight: 600;
  }
  .prose-book :global(p::first-letter) {
    float: left;
    font-size: 5.5rem;
    line-height: 0.75;
    margin-top: 0.1em;
    padding-right: 0.15em;
    font-weight: 400;
    color: rgb(253, 230, 138);
    font-style: normal;
  }
</style>
