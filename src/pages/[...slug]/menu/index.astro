---
import Layout from "../../../layouts/Layout.astro";
import { getCollection } from "astro:content";
import CategoryCard from "../../../components/menu/CategoryCard.astro";
import CategoryNav from "../../../components/menu/CategoryNav.astro";

export async function getStaticPaths() {
  const languages = await getCollection("languages");
  const result = languages.map((it) => {
    return { params: { slug: it.data.code } };
  });
  result.push({ params: { slug: undefined as any } });
  return result;
}
const response = await getCollection("categories");
const categories = response.map(({ data: category }) => category);
---

<Layout title="Menu">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-4">
    <CategoryNav categories={categories} />

    <div class="space-y-24">
      {
        categories.map((category) => {
          return <CategoryCard category={category} />;
        })
      }
    </div>
  </div>
</Layout>
